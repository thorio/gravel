# Maintainer: thorou <thorou@chirality.de>

pkgname=gravel
pkgver=0.0.0_dev # patched by CI
pkgrel=1
pkgdesc="Cross-platform application launcher for Linux and Windows"
arch=("x86_64")
url="https://github.com/thorio/$pkgname"
license=("GPL3")
depends=("libx11" "libxext" "libxft" "libxinerama" "libxcursor" "libxrender" "libxfixes" "pango" "cairo" "libgl" "mesa" "coreutils" "gtk3" "xdg-utils")
options=("!strip" "!debug")

package() {
	reporoot=$(realpath ../../)

	local icondir="$pkgdir/usr/share/icons/hicolor/"
	for file in $reporoot/package/icons/x*.png; do
		size=$(echo $file | grep -Po '\d+')
		path="$icondir/${size}x${size}/apps"

		install -Dm644 "$file" "$path/gravel.png"
	done

	install -Dm755 "$reporoot/target/release/gravel" "$pkgdir/usr/bin/gravel"
	install -Dm644 "$reporoot/package/gravel.desktop" "$pkgdir/usr/share/applications/gravel.desktop"
	install -Dm644 "$reporoot/config.yml" "$pkgdir/usr/share/doc/gravel/default-config.yml"
}
